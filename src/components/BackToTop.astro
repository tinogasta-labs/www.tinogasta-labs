---
import Icon from './ui/Icon.astro'
---

<!-- Back to Top Button -->
<button
  id="back-to-top"
  class="bg-panel pointer-events-none fixed right-6 bottom-6 z-50 rounded-full p-3 opacity-0 shadow-lg transition-all duration-300 ease-in-out outline-none"
  aria-label="Back to Top"
>
  <Icon name="chevron-down" class="size-4 rotate-180" />
</button>

<script>
  // Back to Top functionality
  const backToTopButton = document.getElementById('back-to-top')

  if (backToTopButton) {
    // Function to toggle button visibility
    const toggleBackToTopButton = () => {
      // Show button when scrolled down more than 200 pixels
      if (window.scrollY > 200) {
        backToTopButton.classList.remove('opacity-0', 'pointer-events-none')
        backToTopButton.classList.add('opacity-100', 'cursor-pointer')
      } else {
        backToTopButton.classList.remove('opacity-100', 'cursor-pointer')
        backToTopButton.classList.add('opacity-0', 'pointer-events-none')
      }
    }

    // Add scroll event listener
    window.addEventListener('scroll', toggleBackToTopButton)

    // Add click event to scroll to top
    backToTopButton.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth',
      })
    })

    // Initial check in case page loads with scroll position
    toggleBackToTopButton()
  }
</script>
